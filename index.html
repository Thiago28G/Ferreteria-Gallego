<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ferretería y Pinturería Gallego — Inicio</title>
  <link rel="stylesheet" href="styles.css?v=4" />
  <style>
    :root{--gap:16px}
    .categoria-block{padding:48px 0}
    .categoria-block h2{margin:0 0 24px 0;padding:0 16px;font-size:1.75rem;color:var(--dark);font-weight:700}
    .catalogo-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:var(--gap);padding:0 16px}
    .prod-card{border:1px solid #e6e6e6;border-radius:12px;overflow:hidden;background:#fff;display:flex;flex-direction:column}
    .prod-thumb{aspect-ratio:1/1;display:flex;align-items:center;justify-content:center;background:#fafafa}
    .prod-thumb img{max-width:90%;max-height:90%;object-fit:contain;display:block}
    .prod-body{padding:12px;display:flex;flex-direction:column;gap:8px}
    .prod-name{font-weight:600;line-height:1.2}
    .prod-sku{font-size:.85rem;color:#666}
    .prod-description{font-size:.8rem;color:#666;line-height:1.4;margin-top:4px}
    .prod-row{display:flex;align-items:center;justify-content:space-between;gap:8px}
    .prod-price{font-weight:700}
    .qty-wrap{display:flex;align-items:center}
    .stepper{display:inline-flex;align-items:center;border:1px solid #ddd;border-radius:8px;overflow:hidden}
    .stepper .dec,.stepper .inc{width:36px;height:36px;border:0;background:#f3f3f3;cursor:pointer}
    .stepper .qty{width:48px;height:36px;border:0;text-align:center}
  </style>
</head>

<body>
  <header id="app-header"></header>

  <section class="hero-full" style="--hero-img: url('img/hero-ferreteria.webp');">
    <div class="hero-layer"></div>
    <div class="hero-content container">
      <h1>¿Qué necesitás hoy?</h1>
      <p>Comprá online y retiralo listo en Ferretería y Pinturería Gallego.</p>
    </div>
  </section>

  <main id="main-content">
    <section id="agua" class="categoria-block">
      <h2>Plomería y Agua</h2>
      <div id="grid-agua" class="catalogo-grid"></div>
    </section>

    <section id="pintura" class="categoria-block">
      <h2>Pintura</h2>
      <div id="grid-pintura" class="catalogo-grid"></div>
    </section>

    <section id="herramientas-manuales" class="categoria-block">
      <h2>Herramientas Manuales</h2>
      <div id="grid-herramientas-manuales" class="catalogo-grid"></div>
    </section>

    <section id="electricidad-iluminacion" class="categoria-block">
      <h2>Electricidad e Iluminación</h2>
      <div id="grid-electricidad-iluminacion" class="catalogo-grid"></div>
    </section>

    <section id="adhesivos-selladores" class="categoria-block">
      <h2>Adhesivos y Selladores</h2>
      <div id="grid-adhesivos-selladores" class="catalogo-grid"></div>
    </section>

    <section id="jardineria" class="categoria-block">
      <h2>Jardinería</h2>
      <div id="grid-jardineria" class="catalogo-grid"></div>
    </section>

    <section id="construccion" class="categoria-block">
      <h2>Construcción</h2>
      <div id="grid-construccion" class="catalogo-grid"></div>
    </section>
  </main>


  <footer class="footer">© <span id="year"></span> Ferretería y Pinturería Gallego</footer>

  <script type="module">
    import { requireAuth, logout } from './assets/js/auth.js';
    import { navLinks } from './assets/js/data/pages.js';
    import { renderNavbar } from './assets/js/components/navbar.js';
    import { renderProductCards } from './assets/js/components/cards.js';
    import { initCart, updateCartView } from './assets/js/components/cart.js';

    requireAuth();
    renderNavbar('#app-header', navLinks);
    initCart();
    
    document.getElementById('btnLogout')?.addEventListener('click', e => { e.preventDefault(); logout(); });
    document.getElementById('year').textContent = new Date().getFullYear();

    async function loadProducts() {
      try {
        const res = await fetch('./assets/js/data/products.json', { cache: 'no-store' });
        if (!res.ok) throw new Error('no ok');
        const data = await res.json();
        const map = {
          'agua': 'grid-agua',
          'pintura': 'grid-pintura',
          'herramientas-manuales': 'grid-herramientas-manuales',
          'electricidad-iluminacion': 'grid-electricidad-iluminacion',
          'adhesivos-selladores': 'grid-adhesivos-selladores',
          'jardineria': 'grid-jardineria',
          'construccion': 'grid-construccion'
        };
        Object.entries(map).forEach(([cat, gridId]) => {
          const lista = Array.isArray(data[cat]) ? data[cat].slice(0,3) : [];
          const gridSel = '#' + gridId;
          renderProductCards(gridSel, lista, updateCartView);
        });
      } catch {}
    }

    loadProducts();

    if (location.hash) {
      const id = location.hash.replace('#','');
      const el = document.getElementById(id);
      if (el) el.scrollIntoView({ behavior: 'smooth' });
    }
  </script>
</body>
</html>